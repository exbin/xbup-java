<html>
  <head>
    <link href="../../style.css" rel="stylesheet" type="text/css">
    
  </head>
  <body>
    <p class="heading1">
      Avoiding loss of data in the close process
    </p>
    <p>
      The process of closing one or more documents technically is easy to 
      achieve. However, making sure that changes to a document are not lost 
      when it is closed is a more complex task.
    </p>
    <p class="heading2">
      Step 1: Intercept all close actions
    </p>
    <p>
      Because a close operation can be caused by different actions, it is 
      important to take into account all occasions that would cause a document 
      to close. So the first step to take is to ensure that each and every 
      possible close action is intercepted by a check wheter or not it is ok 
      to close that document or what requirements are bound to closing it.
    </p>
    <p>
      In the design of SimplyHTML proper handling of close requests is ensured 
      by having all methods to call the same action for closing a document: <font face="'Courier New',Monospaced,Monospace"><a href="../../topic16/topic4/topic20/topic27.htm">
SHTMLFileCloseAction</a></font>. Having all related functionality in a central 
      place and having all other related methods to call that central 
      functionality makes it easier to implement exactly the correct 
      functionality and makes sure it is implemented only once.
    </p>
    <p>
      The close actions to intercept are
    </p>
    <ul>
      <li>
        closing the main frame (method <font face="'Courier New',Monospaced,Monospace"><a href="../../topic16/topic4/topic12/topic14.htm">
processWindowEvent</a></font>)
      </li>
      <li>
        selecting 'Exit' from menu 'File' (<font face="'Courier New',Monospaced,Monospace"><a href="../../topic16/topic4/topic20/topic37.htm">
SHTMLFileExitAction</a></font>)
      </li>
      <li>
        selecting 'Close' from menu 'File' (<font face="'Courier New',Monospaced,Monospace"><a href="../../topic16/topic4/topic20/topic27.htm">
SHTMLFileCloseAction</a></font>)
      </li>
      <li>
        selecting 'Close all' from menu 'File' (<font face="'Courier New',Monospaced,Monospace"><a href="../../topic16/topic4/topic20/topic36.htm">
SHTMLFileCloseAllAction</a></font>)
      </li>
    </ul>
    <p class="heading2">
      Step 2: Ensure documents are closed only when conditions allow it
    </p>
    <p>
      The second step is to ensure that a document is only closed when 
      conditions allow to close it. Before it closes a document, <font face="'Courier New',Monospaced,Monospace"><a href="../../topic16/topic4/topic20/topic27.htm">
SHTMLFileCloseAction</a></font> tests in a central place, if changes are to be 
      saved for that document first or if a save process currently is going on 
      which finalization has to be waited for.
    </p>
    <p>
      In this functionality the logic is placed to notify the user, that he is 
      about to close a document which contains unsaved changes and to ask the 
      user for a decision whether or not the changes should be saved before 
      closing.
    </p>
    <p class="heading2">
      Step 3: Testing the result of the close action
    </p>
    <p>
      In cases where an action has to follow the close action, such as when 
      the application shall be terminated, the exit action needs to test if a 
      document has been actually closed after it requested to close it. 
      Otherwise, an application would terminate even if the user opted to 
      cancel the operation during the close action (e.g. when asked to save 
      the document first).
    </p>
  </body>
</html>
